(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7e51"],{"1jgq":function(t,s,a){},"3NST":function(t,s,a){"use strict";var e=a("HKbb");a.n(e).a},"4XeK":function(t,s,a){"use strict";a.d(s,"a",function(){return n}),a.d(s,"b",function(){return i});var e=a("t3Un"),n=function(t){var s=t.payway,a=t.amount;return Object(e.a)({url:"/api/deposits/qrcode",method:"post",data:{payway:s,amount:a}})},i=function(t){var s=t.page,a=void 0===s?1:s,n=t.page_size,i=void 0===n?10:n,o=t.state,c=void 0===o?"":o;return Object(e.a)({url:"/api/deposits/list",method:"get",data:{page:a,page_size:i,state:c}})}},"4trN":function(t,s,a){"use strict";var e=a("vF8W");a.n(e).a},C5dt:function(t,s,a){"use strict";var e=a("QbLZ"),n=a.n(e),i=a("0FX9"),o=a.n(i),c=a("L2JU"),r={props:{qrcode:String,payway:String,amount:Number},ws:null,computed:n()({},Object(c.c)(["user"])),mounted:function(){var t=this;this.ws=new WebSocket("ws://127.0.0.1:7234?user=_"+this.user.info.id,"echo-protocol"),this.ws.onopen=function(s){o.a.toCanvas(t.$el.querySelector(".qrcode-canvas"),t.qrcode,{width:300})},this.ws.onmessage=function(s){try{var a=JSON.parse(s.data);1==a.paySuccess?t.$emit("success",a):t.$emit("fail")}catch(t){alert(t)}}},methods:{close:function(){this.ws.close()}}},l=(a("3NST"),a("KHd+")),u=Object(l.a)(r,function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"pay-comp",class:{wepay:2==t.payway,alipay:1==t.payway}},[1==t.payway?a("div",{staticClass:"deposit-title"},[a("svg-icon",{attrs:{"icon-class":"zhifubao"}}),t._v(" 支付宝\n    ")],1):t._e(),t._v(" "),2==t.payway?a("div",{staticClass:"deposit-title"},[a("svg-icon",{attrs:{"icon-class":"wepay"}}),t._v(" 微信支付\n    ")],1):t._e(),t._v(" "),a("div",{staticClass:"deposit-num"},[a("span",{staticClass:"num-widget"},[t._v("￥")]),t._v("\n        "+t._s(t.amount/100)+"\n    ")]),t._v(" "),a("canvas",{staticClass:"qrcode-canvas"})])},[],!1,null,"549a193a",null);u.options.__file="Pay.vue";s.a=u.exports},GgHD:function(t,s,a){"use strict";a.r(s);var e=a("14Xm"),n=a.n(e),i=a("D3Ub"),o=a.n(i),c=a("QbLZ"),r=a.n(c),l=a("4XeK"),u=(a("wk8/"),a("L2JU")),v=(a("0FX9"),a("I8ep")),p=a("C5dt"),d={data:function(){return{dialogVisible:!1,amountList:[1,1e3,2e3,3e3,5e3,1e4,3e4,1e5],btnLoading:!1,form:{payway:"2",amount:""},depositStep:1,qrcode:""}},watch:{"form.payway":function(){this.form.amount=""},dialogVisible:function(t){t&&(this.depositStep=1)}},computed:r()({},Object(u.c)({user:function(t){return t.user}})),components:{Membership:v.a,Pay:p.a},created:function(){var t=this;return o()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.$store.dispatch("FetchUser");case 1:case"end":return s.stop()}},s,t)}))()},methods:{changeMember:function(t){this.member=t},paySuccess:function(){this.$message({type:"success",message:"充值成功"}),this.dialogVisible=!1,this.$store.dispatch("FetchUser")},fetchQrcodeSubmit:function(){var t=this;return o()(n.a.mark(function s(){var a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.form.amount){s.next=3;break}return t.$message({type:"warning",message:"请选择充值金额"}),s.abrupt("return");case 3:return t.btnLoading=!0,s.next=6,Object(l.a)(t.form);case 6:if(a=s.sent,t.btnLoading=!1,null!==a){s.next=10;break}return s.abrupt("return");case 10:t.qrcode=a.qrcode,t.depositStep=2;case 12:case"end":return s.stop()}},s,t)}))()}}},m=(a("rOdO"),a("KHd+")),f=Object(m.a)(d,function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"deposit-comp"},[a("div",{staticClass:"balance-cell"},[a("div",{staticClass:"cell-hd"},[t._v("账户余额 : ")]),t._v(" "),a("div",{staticClass:"cell-bd"},[a("b",{staticClass:"primary"},[t._v(t._s(t.user.info.balance/100||0))]),t._v("\n            元\n        ")]),t._v(" "),a("div",{staticClass:"cell-ft"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(s){t.dialogVisible=!0}}},[t._v("充值")])],1)]),t._v(" "),a("Membership",{on:{change:t.changeMember}}),t._v(" "),a("el-dialog",{attrs:{title:"充值",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(s){t.dialogVisible=s}}},[1==t.depositStep?[a("el-tabs",{model:{value:t.form.payway,callback:function(s){t.$set(t.form,"payway",s)},expression:"form.payway"}},[a("el-tab-pane",{attrs:{name:"2"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("svg-icon",{attrs:{"icon-class":"wepay"}}),t._v(" 微信支付\n                    ")],1),t._v(" "),a("div",{staticClass:"amount-list"},t._l(t.amountList,function(s,e){return a("div",{key:e,staticClass:"amount-item",class:{hover:t.form.amount==s},on:{click:function(a){t.form.amount=s}}},[t._v("\n                            "+t._s(s/100)+" \n                            "),a("span",{staticClass:"desc"},[t._v("元")])])}))]),t._v(" "),a("el-tab-pane",{attrs:{name:"1"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("svg-icon",{attrs:{"icon-class":"zhifubao"}}),t._v(" 支付宝\n                    ")],1),t._v(" "),a("div",{staticClass:"amount-list"},t._l(t.amountList,function(s,e){return a("div",{key:e,staticClass:"amount-item",class:{hover:t.form.amount==s},on:{click:function(a){t.form.amount=s}}},[t._v("\n                            "+t._s(s/100)+" \n                            "),a("span",{staticClass:"desc"},[t._v("元")])])}))])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(s){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.fetchQrcodeSubmit}},[t._v("确 定")])],1)]:t._e(),t._v(" "),2==t.depositStep?a("pay",{attrs:{amount:t.form.amount,payway:t.form.payway,qrcode:t.qrcode},on:{success:t.paySuccess}}):t._e()],2)],1)},[],!1,null,"3258e044",null);f.options.__file="Deposit.vue";var _={components:{Deposit:f.exports}},b=(a("4trN"),Object(m.a)(_,function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"intro-index-page"},[s("deposit"),this._v(" "),this._m(0)],1)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"sec"},[a("div",{staticClass:"sec-title"},[a("b",[t._v("使用教程")])]),t._v(" "),a("div",{staticClass:"title"},[a("b",[t._v("第一步： 创建应用")])]),t._v(" "),a("div",{staticClass:"text"},[t._v("\n            点击左侧菜单栏 ”应用管理“，进入界面，然后点击里面的”创建应用“按钮，开始创建您的第一个应用。 "),a("br"),t._v("创建成功后，就会为你生成AppID和AppSecret，这两个字段后面用于手机上的app配置\n        ")]),t._v(" "),a("div",{staticClass:"title"},[a("b",[t._v("第二步： 下载App")])]),t._v(" "),a("div",{staticClass:"text"},[t._v("\n            点击左侧菜单栏 ”软件下载“，进入界面，按照要求依次下载里面的软件。如果手机内预先安装了其他版本的微信、支付宝，请卸载后再安装\n        ")]),t._v(" "),a("div",{staticClass:"title"},[a("b",[t._v("第三步： 配置App")])]),t._v(" "),a("div",{staticClass:"text"},[t._v("\n            点击左侧菜单栏 ”软件下载“，进入界面，按照要求依次下载里面的软件。如果手机内预先安装了其他版本的微信、支付宝，请卸载后再安装\n        ")]),t._v(" "),a("div",{staticClass:"title"},[a("b",[t._v("第四步： 测试支付")])]),t._v(" "),a("div",{staticClass:"text"},[t._v("\n            点击左侧菜单栏 ”软件下载“，进入界面，按照要求依次下载里面的软件。如果手机内预先安装了其他版本的微信、支付宝，请卸载后再安装\n        ")])])}],!1,null,"63a081ac",null));b.options.__file="Index.vue";s.default=b.exports},HKbb:function(t,s,a){},rOdO:function(t,s,a){"use strict";var e=a("1jgq");a.n(e).a},vF8W:function(t,s,a){}}]);